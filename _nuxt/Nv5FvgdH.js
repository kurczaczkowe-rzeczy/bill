import{j as Q,k as U,D as cr,E as Jt,G as ho,H as go,I as Yt,i as A,p as pt,e as qe,c as tt,o as J,r as qt,y as mo,a as z,A as Oe,b as rt,C as vo,m as Le,B as ce,x as bo,g as Ne,J as ur,d as vn,t as wt,F as ue,h as de,K as Fe,T as dr,L as fr,M as bn,N as pr,O as Dn,n as yo,P as wo,q as xo,f as hr,w as At,Q as gr,s as tn,l as mr,R as vr,v as Fn,S as br,z as en,U as yr,V as wr,W as xr,X as Sr}from"./BDdzVwkJ.js";import{_ as Cr}from"./DqwnskmJ.js";import{groupProductsByCategoryJs as _r,UnitEnum as fe,getShoppingListChannelName as Er}from"./D0huSepL.js";import{b as Dr,u as So,s as yt,r as Bt,a as Ar,k as Be,g as Tr,c as Or,i as kr,p as Pr}from"./BgK8kK6M.js";import{_ as nn}from"./ByagjEw2.js";const te=Math.min,ct=Math.max,Ve=Math.round,_e=Math.floor,xt=t=>({x:t,y:t}),Ir={left:"right",right:"left",bottom:"top",top:"bottom"},Rr={start:"end",end:"start"};function Bn(t,e,n){return ct(t,te(e,n))}function ye(t,e){return typeof t=="function"?t(e):t}function Nt(t){return t.split("-")[0]}function we(t){return t.split("-")[1]}function Co(t){return t==="x"?"y":"x"}function _o(t){return t==="y"?"height":"width"}const Mr=new Set(["top","bottom"]);function Tt(t){return Mr.has(Nt(t))?"y":"x"}function Eo(t){return Co(Tt(t))}function Lr(t,e,n){n===void 0&&(n=!1);const o=we(t),r=Eo(t),i=_o(r);let a=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=$e(a)),[a,$e(a)]}function Nr(t){const e=$e(t);return[yn(t),e,yn(e)]}function yn(t){return t.replace(/start|end/g,e=>Rr[e])}const Vn=["left","right"],$n=["right","left"],Fr=["top","bottom"],Br=["bottom","top"];function Vr(t,e,n){switch(t){case"top":case"bottom":return n?e?$n:Vn:e?Vn:$n;case"left":case"right":return e?Fr:Br;default:return[]}}function $r(t,e,n,o){const r=we(t);let i=Vr(Nt(t),n==="start",o);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(yn)))),i}function $e(t){return t.replace(/left|right|bottom|top/g,e=>Ir[e])}function Wr(t){return{top:0,right:0,bottom:0,left:0,...t}}function Xr(t){return typeof t!="number"?Wr(t):{top:t,right:t,bottom:t,left:t}}function We(t){const{x:e,y:n,width:o,height:r}=t;return{width:o,height:r,top:n,left:e,right:e+o,bottom:n+r,x:e,y:n}}function Wn(t,e,n){let{reference:o,floating:r}=t;const i=Tt(e),a=Eo(e),s=_o(a),l=Nt(e),u=i==="y",c=o.x+o.width/2-r.width/2,d=o.y+o.height/2-r.height/2,g=o[s]/2-r[s]/2;let p;switch(l){case"top":p={x:c,y:o.y-r.height};break;case"bottom":p={x:c,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:d};break;case"left":p={x:o.x-r.width,y:d};break;default:p={x:o.x,y:o.y}}switch(we(e)){case"start":p[a]-=g*(n&&u?-1:1);break;case"end":p[a]+=g*(n&&u?-1:1);break}return p}const jr=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:c,y:d}=Wn(u,o,l),g=o,p={},b=0;for(let v=0;v<s.length;v++){const{name:m,fn:f}=s[v],{x:h,y:w,data:D,reset:_}=await f({x:c,y:d,initialPlacement:o,placement:g,strategy:r,middlewareData:p,rects:u,platform:a,elements:{reference:t,floating:e}});c=h??c,d=w??d,p={...p,[m]:{...p[m],...D}},_&&b<=50&&(b++,typeof _=="object"&&(_.placement&&(g=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:c,y:d}=Wn(u,g,l)),v=-1)}return{x:c,y:d,placement:g,strategy:r,middlewareData:p}};async function An(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:i,rects:a,elements:s,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:g=!1,padding:p=0}=ye(e,t),b=Xr(p),m=s[g?d==="floating"?"reference":"floating":d],f=We(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(m)))==null||n?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),h=d==="floating"?{x:o,y:r,width:a.floating.width,height:a.floating.height}:a.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),D=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},_=We(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:h,offsetParent:w,strategy:l}):h);return{top:(f.top-_.top+b.top)/D.y,bottom:(_.bottom-f.bottom+b.bottom)/D.y,left:(f.left-_.left+b.left)/D.x,right:(_.right-f.right+b.right)/D.x}}const Yr=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:r,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:g,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...m}=ye(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const f=Nt(r),h=Tt(s),w=Nt(s)===s,D=await(l.isRTL==null?void 0:l.isRTL(u.floating)),_=g||(w||!v?[$e(s)]:Nr(s)),W=b!=="none";!g&&W&&_.push(...$r(s,v,b,D));const R=[s,..._],C=await An(e,m),E=[];let x=((o=i.flip)==null?void 0:o.overflows)||[];if(c&&E.push(C[f]),d){const L=Lr(r,a,D);E.push(C[L[0]],C[L[1]])}if(x=[...x,{placement:r,overflows:E}],!E.every(L=>L<=0)){var P,S;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,N=R[L];if(N&&(!(d==="alignment"?h!==Tt(N):!1)||x.every(G=>Tt(G.placement)===h?G.overflows[0]>0:!0)))return{data:{index:L,overflows:x},reset:{placement:N}};let F=(S=x.filter(B=>B.overflows[0]<=0).sort((B,G)=>B.overflows[1]-G.overflows[1])[0])==null?void 0:S.placement;if(!F)switch(p){case"bestFit":{var I;const B=(I=x.filter(G=>{if(W){const et=Tt(G.placement);return et===h||et==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(et=>et>0).reduce((et,oe)=>et+oe,0)]).sort((G,et)=>G[1]-et[1])[0])==null?void 0:I[0];B&&(F=B);break}case"initialPlacement":F=s;break}if(r!==F)return{reset:{placement:F}}}return{}}}},Hr=new Set(["left","top"]);async function zr(t,e){const{placement:n,platform:o,elements:r}=t,i=await(o.isRTL==null?void 0:o.isRTL(r.floating)),a=Nt(n),s=we(n),l=Tt(n)==="y",u=Hr.has(a)?-1:1,c=i&&l?-1:1,d=ye(e,t);let{mainAxis:g,crossAxis:p,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof b=="number"&&(p=s==="end"?b*-1:b),l?{x:p*c,y:g*u}:{x:g*u,y:p*c}}const Ur=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:r,y:i,placement:a,middlewareData:s}=e,l=await zr(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(o=s.arrow)!=null&&o.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:a}}}}},qr=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:r}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:f,y:h}=m;return{x:f,y:h}}},...l}=ye(t,e),u={x:n,y:o},c=await An(e,l),d=Tt(Nt(r)),g=Co(d);let p=u[g],b=u[d];if(i){const m=g==="y"?"top":"left",f=g==="y"?"bottom":"right",h=p+c[m],w=p-c[f];p=Bn(h,p,w)}if(a){const m=d==="y"?"top":"left",f=d==="y"?"bottom":"right",h=b+c[m],w=b-c[f];b=Bn(h,b,w)}const v=s.fn({...e,[g]:p,[d]:b});return{...v,data:{x:v.x-n,y:v.y-o,enabled:{[g]:i,[d]:a}}}}}},Gr=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:r,rects:i,platform:a,elements:s}=e,{apply:l=()=>{},...u}=ye(t,e),c=await An(e,u),d=Nt(r),g=we(r),p=Tt(r)==="y",{width:b,height:v}=i.floating;let m,f;d==="top"||d==="bottom"?(m=d,f=g===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(f=d,m=g==="end"?"top":"bottom");const h=v-c.top-c.bottom,w=b-c.left-c.right,D=te(v-c[m],h),_=te(b-c[f],w),W=!e.middlewareData.shift;let R=D,C=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=w),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(R=h),W&&!g){const x=ct(c.left,0),P=ct(c.right,0),S=ct(c.top,0),I=ct(c.bottom,0);p?C=b-2*(x!==0||P!==0?x+P:ct(c.left,c.right)):R=v-2*(S!==0||I!==0?S+I:ct(c.top,c.bottom))}await l({...e,availableWidth:C,availableHeight:R});const E=await a.getDimensions(s.floating);return b!==E.width||v!==E.height?{reset:{rects:!0}}:{}}}};function Ge(){return typeof window<"u"}function jt(t){return Tn(t)?(t.nodeName||"").toLowerCase():"#document"}function dt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Et(t){var e;return(e=(Tn(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Tn(t){return Ge()?t instanceof Node||t instanceof dt(t).Node:!1}function vt(t){return Ge()?t instanceof Element||t instanceof dt(t).Element:!1}function Ct(t){return Ge()?t instanceof HTMLElement||t instanceof dt(t).HTMLElement:!1}function Xn(t){return!Ge()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof dt(t).ShadowRoot}const Kr=new Set(["inline","contents"]);function xe(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=bt(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!Kr.has(r)}const Jr=new Set(["table","td","th"]);function Qr(t){return Jr.has(jt(t))}const Zr=[":popover-open",":modal"];function Ke(t){return Zr.some(e=>{try{return t.matches(e)}catch{return!1}})}const ti=["transform","translate","scale","rotate","perspective"],ei=["transform","translate","scale","rotate","perspective","filter"],ni=["paint","layout","strict","content"];function On(t){const e=kn(),n=vt(t)?bt(t):t;return ti.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ei.some(o=>(n.willChange||"").includes(o))||ni.some(o=>(n.contain||"").includes(o))}function oi(t){let e=Ft(t);for(;Ct(e)&&!ee(e);){if(On(e))return e;if(Ke(e))return null;e=Ft(e)}return null}function kn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ri=new Set(["html","body","#document"]);function ee(t){return ri.has(jt(t))}function bt(t){return dt(t).getComputedStyle(t)}function Je(t){return vt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ft(t){if(jt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Xn(t)&&t.host||Et(t);return Xn(e)?e.host:e}function Do(t){const e=Ft(t);return ee(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ct(e)&&xe(e)?e:Do(e)}function be(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Do(t),i=r===((o=t.ownerDocument)==null?void 0:o.body),a=dt(r);if(i){const s=wn(a);return e.concat(a,a.visualViewport||[],xe(r)?r:[],s&&n?be(s):[])}return e.concat(r,be(r,[],n))}function wn(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ao(t){const e=bt(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=Ct(t),i=r?t.offsetWidth:n,a=r?t.offsetHeight:o,s=Ve(n)!==i||Ve(o)!==a;return s&&(n=i,o=a),{width:n,height:o,$:s}}function Pn(t){return vt(t)?t:t.contextElement}function Qt(t){const e=Pn(t);if(!Ct(e))return xt(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=Ao(e);let a=(i?Ve(n.width):n.width)/o,s=(i?Ve(n.height):n.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const ii=xt(0);function To(t){const e=dt(t);return!kn()||!e.visualViewport?ii:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ai(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==dt(t)?!1:e}function Xt(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=Pn(t);let a=xt(1);e&&(o?vt(o)&&(a=Qt(o)):a=Qt(t));const s=ai(i,n,o)?To(i):xt(0);let l=(r.left+s.x)/a.x,u=(r.top+s.y)/a.y,c=r.width/a.x,d=r.height/a.y;if(i){const g=dt(i),p=o&&vt(o)?dt(o):o;let b=g,v=wn(b);for(;v&&o&&p!==b;){const m=Qt(v),f=v.getBoundingClientRect(),h=bt(v),w=f.left+(v.clientLeft+parseFloat(h.paddingLeft))*m.x,D=f.top+(v.clientTop+parseFloat(h.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=w,u+=D,b=dt(v),v=wn(b)}}return We({width:c,height:d,x:l,y:u})}function Qe(t,e){const n=Je(t).scrollLeft;return e?e.left+n:Xt(Et(t)).left+n}function Oo(t,e){const n=t.getBoundingClientRect(),o=n.left+e.scrollLeft-Qe(t,n),r=n.top+e.scrollTop;return{x:o,y:r}}function li(t){let{elements:e,rect:n,offsetParent:o,strategy:r}=t;const i=r==="fixed",a=Et(o),s=e?Ke(e.floating):!1;if(o===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=xt(1);const c=xt(0),d=Ct(o);if((d||!d&&!i)&&((jt(o)!=="body"||xe(a))&&(l=Je(o)),Ct(o))){const p=Xt(o);u=Qt(o),c.x=p.x+o.clientLeft,c.y=p.y+o.clientTop}const g=a&&!d&&!i?Oo(a,l):xt(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+g.x,y:n.y*u.y-l.scrollTop*u.y+c.y+g.y}}function si(t){return Array.from(t.getClientRects())}function ci(t){const e=Et(t),n=Je(t),o=t.ownerDocument.body,r=ct(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),i=ct(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let a=-n.scrollLeft+Qe(t);const s=-n.scrollTop;return bt(o).direction==="rtl"&&(a+=ct(e.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:s}}const jn=25;function ui(t,e){const n=dt(t),o=Et(t),r=n.visualViewport;let i=o.clientWidth,a=o.clientHeight,s=0,l=0;if(r){i=r.width,a=r.height;const c=kn();(!c||c&&e==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}const u=Qe(o);if(u<=0){const c=o.ownerDocument,d=c.body,g=getComputedStyle(d),p=c.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,b=Math.abs(o.clientWidth-d.clientWidth-p);b<=jn&&(i-=b)}else u<=jn&&(i+=u);return{width:i,height:a,x:s,y:l}}const di=new Set(["absolute","fixed"]);function fi(t,e){const n=Xt(t,!0,e==="fixed"),o=n.top+t.clientTop,r=n.left+t.clientLeft,i=Ct(t)?Qt(t):xt(1),a=t.clientWidth*i.x,s=t.clientHeight*i.y,l=r*i.x,u=o*i.y;return{width:a,height:s,x:l,y:u}}function Yn(t,e,n){let o;if(e==="viewport")o=ui(t,n);else if(e==="document")o=ci(Et(t));else if(vt(e))o=fi(e,n);else{const r=To(t);o={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return We(o)}function ko(t,e){const n=Ft(t);return n===e||!vt(n)||ee(n)?!1:bt(n).position==="fixed"||ko(n,e)}function pi(t,e){const n=e.get(t);if(n)return n;let o=be(t,[],!1).filter(s=>vt(s)&&jt(s)!=="body"),r=null;const i=bt(t).position==="fixed";let a=i?Ft(t):t;for(;vt(a)&&!ee(a);){const s=bt(a),l=On(a);!l&&s.position==="fixed"&&(r=null),(i?!l&&!r:!l&&s.position==="static"&&!!r&&di.has(r.position)||xe(a)&&!l&&ko(t,a))?o=o.filter(c=>c!==a):r=s,a=Ft(a)}return e.set(t,o),o}function hi(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const a=[...n==="clippingAncestors"?Ke(e)?[]:pi(e,this._c):[].concat(n),o],s=a[0],l=a.reduce((u,c)=>{const d=Yn(e,c,r);return u.top=ct(d.top,u.top),u.right=te(d.right,u.right),u.bottom=te(d.bottom,u.bottom),u.left=ct(d.left,u.left),u},Yn(e,s,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gi(t){const{width:e,height:n}=Ao(t);return{width:e,height:n}}function mi(t,e,n){const o=Ct(e),r=Et(e),i=n==="fixed",a=Xt(t,!0,i,e);let s={scrollLeft:0,scrollTop:0};const l=xt(0);function u(){l.x=Qe(r)}if(o||!o&&!i)if((jt(e)!=="body"||xe(r))&&(s=Je(e)),o){const p=Xt(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&u();i&&!o&&r&&u();const c=r&&!o&&!i?Oo(r,s):xt(0),d=a.left+s.scrollLeft-l.x-c.x,g=a.top+s.scrollTop-l.y-c.y;return{x:d,y:g,width:a.width,height:a.height}}function on(t){return bt(t).position==="static"}function Hn(t,e){if(!Ct(t)||bt(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Et(t)===n&&(n=n.ownerDocument.body),n}function Po(t,e){const n=dt(t);if(Ke(t))return n;if(!Ct(t)){let r=Ft(t);for(;r&&!ee(r);){if(vt(r)&&!on(r))return r;r=Ft(r)}return n}let o=Hn(t,e);for(;o&&Qr(o)&&on(o);)o=Hn(o,e);return o&&ee(o)&&on(o)&&!On(o)?n:o||oi(t)||n}const vi=async function(t){const e=this.getOffsetParent||Po,n=this.getDimensions,o=await n(t.floating);return{reference:mi(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function bi(t){return bt(t).direction==="rtl"}const yi={convertOffsetParentRelativeRectToViewportRelativeRect:li,getDocumentElement:Et,getClippingRect:hi,getOffsetParent:Po,getElementRects:vi,getClientRects:si,getDimensions:gi,getScale:Qt,isElement:vt,isRTL:bi};function Io(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wi(t,e){let n=null,o;const r=Et(t);function i(){var s;clearTimeout(o),(s=n)==null||s.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:c,top:d,width:g,height:p}=u;if(s||e(),!g||!p)return;const b=_e(d),v=_e(r.clientWidth-(c+g)),m=_e(r.clientHeight-(d+p)),f=_e(c),w={rootMargin:-b+"px "+-v+"px "+-m+"px "+-f+"px",threshold:ct(0,te(1,l))||1};let D=!0;function _(W){const R=W[0].intersectionRatio;if(R!==l){if(!D)return a();R?a(!1,R):o=setTimeout(()=>{a(!1,1e-7)},1e3)}R===1&&!Io(u,t.getBoundingClientRect())&&a(),D=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return a(!0),i}function xi(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=o,u=Pn(t),c=r||i?[...u?be(u):[],...be(e)]:[];c.forEach(f=>{r&&f.addEventListener("scroll",n,{passive:!0}),i&&f.addEventListener("resize",n)});const d=u&&s?wi(u,n):null;let g=-1,p=null;a&&(p=new ResizeObserver(f=>{let[h]=f;h&&h.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let b,v=l?Xt(t):null;l&&m();function m(){const f=Xt(t);v&&!Io(v,f)&&n(),v=f,b=requestAnimationFrame(m)}return n(),()=>{var f;c.forEach(h=>{r&&h.removeEventListener("scroll",n),i&&h.removeEventListener("resize",n)}),d?.(),(f=p)==null||f.disconnect(),p=null,l&&cancelAnimationFrame(b)}}const Si=Ur,Ci=qr,_i=Yr,Ei=Gr,Di=(t,e,n)=>{const o=new Map,r={platform:yi,...n},i={...r.platform,_c:o};return jr(t,e,{...r,platform:i})};function Ai(t){return t!=null&&typeof t=="object"&&"$el"in t}function zn(t){if(Ai(t)){const e=t.$el;return Tn(e)&&jt(e)==="#comment"?null:e}return t}function re(t){return typeof t=="function"?t():A(t)}function Ro(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Un(t,e){const n=Ro(t);return Math.round(e*n)/n}function Ti(t,e,n){n===void 0&&(n={});const o=n.whileElementsMounted,r=Q(()=>{var R;return(R=re(n.open))!=null?R:!0}),i=Q(()=>re(n.middleware)),a=Q(()=>{var R;return(R=re(n.placement))!=null?R:"bottom"}),s=Q(()=>{var R;return(R=re(n.strategy))!=null?R:"absolute"}),l=Q(()=>{var R;return(R=re(n.transform))!=null?R:!0}),u=Q(()=>zn(t.value)),c=Q(()=>zn(e.value)),d=U(0),g=U(0),p=U(s.value),b=U(a.value),v=cr({}),m=U(!1),f=Q(()=>{const R={position:p.value,left:"0",top:"0"};if(!c.value)return R;const C=Un(c.value,d.value),E=Un(c.value,g.value);return l.value?{...R,transform:"translate("+C+"px, "+E+"px)",...Ro(c.value)>=1.5&&{willChange:"transform"}}:{position:p.value,left:C+"px",top:E+"px"}});let h;function w(){if(u.value==null||c.value==null)return;const R=r.value;Di(u.value,c.value,{middleware:i.value,placement:a.value,strategy:s.value}).then(C=>{d.value=C.x,g.value=C.y,p.value=C.strategy,b.value=C.placement,v.value=C.middlewareData,m.value=R!==!1})}function D(){typeof h=="function"&&(h(),h=void 0)}function _(){if(D(),o===void 0){w();return}if(u.value!=null&&c.value!=null){h=o(u.value,c.value,w);return}}function W(){r.value||(m.value=!1)}return Jt([i,a,s,r],w,{flush:"sync"}),Jt([u,c],_,{flush:"sync"}),Jt(r,W,{flush:"sync"}),ho()&&go(D),{x:Yt(d),y:Yt(g),strategy:Yt(p),placement:Yt(b),middlewareData:Yt(v),isPositioned:Yt(m),floatingStyles:f,update:w}}function Oi(t){return ho()?(go(t),!0):!1}const Mo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ki=Object.prototype.toString,Pi=t=>ki.call(t)==="[object Object]",It=()=>{},Ii=Ri();function Ri(){var t,e;return Mo&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Mi(t,e){function n(...o){return new Promise((r,i)=>{Promise.resolve(t(()=>e.apply(this,o),{fn:e,thisArg:this,args:o})).then(r).catch(i)})}return n}function Li(t,e={}){let n,o,r=It;const i=l=>{clearTimeout(l),r(),r=It};let a;return l=>{const u=pt(t),c=pt(e.maxWait);return n&&i(n),u<=0||c!==void 0&&c<=0?(o&&(i(o),o=void 0),Promise.resolve(l())):new Promise((d,g)=>{r=e.rejectOnCancel?g:d,a=l,c&&!o&&(o=setTimeout(()=>{n&&i(n),o=void 0,d(a())},c)),n=setTimeout(()=>{o&&i(o),o=void 0,d(l())},u)})}}function rn(t){return Array.isArray(t)?t:[t]}function Ni(t,e=200,n={}){return Mi(Li(e,n),t)}function Fi(t,e,n){return Jt(t,e,{...n,immediate:!0})}const Lo=Mo?window:void 0;function ie(t){var e;const n=pt(t);return(e=n?.$el)!=null?e:n}function an(...t){const e=[],n=()=>{e.forEach(s=>s()),e.length=0},o=(s,l,u,c)=>(s.addEventListener(l,u,c),()=>s.removeEventListener(l,u,c)),r=Q(()=>{const s=rn(pt(t[0])).filter(l=>l!=null);return s.every(l=>typeof l!="string")?s:void 0}),i=Fi(()=>{var s,l;return[(l=(s=r.value)==null?void 0:s.map(u=>ie(u)))!=null?l:[Lo].filter(u=>u!=null),rn(pt(r.value?t[1]:t[0])),rn(A(r.value?t[2]:t[1])),pt(r.value?t[3]:t[2])]},([s,l,u,c])=>{if(n(),!s?.length||!l?.length||!u?.length)return;const d=Pi(c)?{...c}:c;e.push(...s.flatMap(g=>l.flatMap(p=>u.map(b=>o(g,p,b,d)))))},{flush:"post"}),a=()=>{i(),n()};return Oi(n),a}let qn=!1;function Bi(t,e,n={}){const{window:o=Lo,ignore:r=[],capture:i=!0,detectIframe:a=!1,controls:s=!1}=n;if(!o)return s?{stop:It,cancel:It,trigger:It}:It;if(Ii&&!qn){qn=!0;const m={passive:!0};Array.from(o.document.body.children).forEach(f=>f.addEventListener("click",It,m)),o.document.documentElement.addEventListener("click",It,m)}let l=!0;const u=m=>pt(r).some(f=>{if(typeof f=="string")return Array.from(o.document.querySelectorAll(f)).some(h=>h===m.target||m.composedPath().includes(h));{const h=ie(f);return h&&(m.target===h||m.composedPath().includes(h))}});function c(m){const f=pt(m);return f&&f.$.subTree.shapeFlag===16}function d(m,f){const h=pt(m),w=h.$.subTree&&h.$.subTree.children;return w==null||!Array.isArray(w)?!1:w.some(D=>D.el===f.target||f.composedPath().includes(D.el))}const g=m=>{const f=ie(t);if(m.target!=null&&!(!(f instanceof Element)&&c(t)&&d(t,m))&&!(!f||f===m.target||m.composedPath().includes(f))){if("detail"in m&&m.detail===0&&(l=!u(m)),!l){l=!0;return}e(m)}};let p=!1;const b=[an(o,"click",m=>{p||(p=!0,setTimeout(()=>{p=!1},0),g(m))},{passive:!0,capture:i}),an(o,"pointerdown",m=>{const f=ie(t);l=!u(m)&&!!(f&&!m.composedPath().includes(f))},{passive:!0}),a&&an(o,"blur",m=>{setTimeout(()=>{var f;const h=ie(t);((f=o.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!h?.contains(o.document.activeElement)&&e(m)},0)},{passive:!0})].filter(Boolean),v=()=>b.forEach(m=>m());return s?{stop:v,cancel:()=>{l=!1},trigger:m=>{l=!0,g(m),l=!1}}:v}const Vi=["aria-controls","placeholder"],$i=["id"],Wi={key:0,class:"list-row"},Xi={key:1,class:"list-row"},ji={class:"opacity-60"},Yi=["onClick","onMouseenter"],Hi=qe({__name:"BaseAutocomplete",props:{modelValue:{default:""},suggestions:{default:()=>[]},isLoading:{type:Boolean,default:!1},placeholder:{default:"Wyszukaj..."},wrapperClass:{default:""},debounceMs:{default:300},labelKey:{default:"label"},minLengthQuery:{default:3},listId:{}},emits:["update:modelValue","search","select"],setup(t,{emit:e}){const n=t,o=e,r=U(n.modelValue),i=U(!1),a=U(-1),s=U(),l=U(),u=U(),{floatingStyles:c}=Ti(l,u,{placement:"bottom-start",middleware:[Si(10),_i(),Ci(),Ei({apply({availableWidth:f,elements:h}){Object.assign(h.floating.style,{maxWidth:`${f}px`,width:`${h.reference.getBoundingClientRect().width}px`})}})],whileElementsMounted:xi}),d=Ni(f=>{o("search",f)},n.debounceMs);function g(f){i.value=!0;const h=f.target.value;r.value=h,o("update:modelValue",h),a.value=-1,h.length>=n.minLengthQuery&&d(h)}function p(f){switch(f.key.toLowerCase()){case"arrowdown":{f.preventDefault(),a.value=Math.min(a.value+1,n.suggestions.length-1),!i.value&&a.value>=0&&b(n.suggestions[a.value]);break}case"arrowup":{f.preventDefault(),a.value=Math.max(a.value-1,0),!i.value&&a.value>=0&&b(n.suggestions[a.value]);break}case"enter":{i.value&&(f.preventDefault(),a.value>=0&&b(n.suggestions[a.value]));break}case"escape":{i.value=!1,a.value=-1;break}case"tab":{i.value=!1,a.value=n.suggestions.findIndex(h=>h[n.labelKey]===r.value),a.value>=0&&b(n.suggestions[a.value]);break}}}function b(f){f&&(o("select",f),r.value=`${f[n.labelKey]}`||f.toString(),o("update:modelValue",r.value),i.value&&(a.value=n.suggestions.findIndex(h=>h.id===f.id)),i.value=!1)}function v(){n.suggestions.length!==0&&(a.value=n.suggestions.findIndex(f=>f[n.labelKey]===r.value),i.value=!0)}Bi(s,()=>{i.value=!1});function m(f){l.value=f}return Jt(()=>n.modelValue,f=>{r.value=f}),(f,h)=>{const w=bo;return J(),tt("div",{ref_key:"containerRef",ref:s,class:Fe([f.wrapperClass,"relative w-full"])},[qt(f.$slots,"input",{attrs:f.$attrs,bindFieldRef:m,handleClick:v,handleInput:g,handleKeydown:p,listId:f.listId,value:A(r)},()=>[z("div",{ref_key:"reference",ref:l,class:"flex items-center gap-2 input input-ghost w-full"},[Oe(z("input",Le({"onUpdate:modelValue":h[0]||(h[0]=D=>ce(r)?r.value=D:null),"aria-controls":f.listId,placeholder:f.placeholder,"aria-autocomplete":"list",autocomplete:"off",role:"combobox",type:"text"},f.$attrs,{onClick:v,onInput:g,onKeydown:p}),null,16,Vi),[[vo,A(r)]]),rt(w,{class:"autocomplete-arrow",name:"mdi:chevron-down"})],512)]),(J(),mo(dr,{to:"#teleports"},[A(i)?(J(),tt("div",{key:0,ref_key:"floating",ref:u,style:ur(A(c)),class:"absolute z-50 w-full bg-base-100 rounded-box shadow-lg border-1 overflow-hidden"},[z("ul",{id:f.listId,class:"list max-h-64 overflow-auto"},[f.isLoading?(J(),tt("li",Wi,[qt(f.$slots,"loading",{},()=>[h[1]||(h[1]=z("span",{class:"loading loading-spinner loading-sm"},null,-1)),h[2]||(h[2]=vn(" Ładowanie… ",-1))])])):!f.isLoading&&f.suggestions.length===0&&A(r)?(J(),tt("li",Xi,[qt(f.$slots,"no-results",{query:A(r)},()=>[z("span",ji,'Brak wyników dla "'+wt(A(r))+'"',1)])])):(J(!0),tt(ue,{key:2},de(f.suggestions,(D,_)=>(J(),tt("li",{key:D.id||_,class:Fe(["list-row cursor-pointer transition-colors",A(a)===_?"bg-base-200":"hover:bg-base-200"]),onClick:W=>b(D),onMouseenter:W=>a.value=_},[qt(f.$slots,"item",{highlighted:A(a)===_,index:_,item:D},()=>[vn(wt(D[f.labelKey]),1)])],42,Yi))),128))],8,$i)],4)):Ne("",!0)]))],2)}}}),zi=Object.assign(Hi,{__name:"BaseAutocomplete"});var Ui=Object.defineProperty,Xe=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,Gn=(t,e,n)=>e in t?Ui(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e)=>{for(var n in e||(e={}))No.call(e,n)&&Gn(t,n,e[n]);if(Xe)for(var n of Xe(e))Fo.call(e,n)&&Gn(t,n,e[n]);return t},Bo=(t,e)=>{var n={};for(var o in t)No.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&Xe)for(var o of Xe(t))e.indexOf(o)<0&&Fo.call(t,o)&&(n[o]=t[o]);return n};const Vo="[vue-draggable-plus]: ";function qi(t){console.warn(Vo+t)}function Gi(t){console.error(Vo+t)}function Kn(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function Ki(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function Ji(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[Ki(n)]=t[n]),e),{})}function Jn(t,e){return Array.isArray(t)&&t.splice(e,1),t}function Qn(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function Qi(t){return typeof t>"u"}function Zi(t){return typeof t=="string"}function Zn(t,e,n){const o=t.children[n];t.insertBefore(e,o)}function ln(t){t.parentNode&&t.parentNode.removeChild(t)}function ta(t,e=document){var n;let o=null;return typeof e?.querySelector=="function"?o=(n=e?.querySelector)==null?void 0:n.call(e,t):o=document.querySelector(t),o||qi(`Element not found: ${t}`),o}function ea(t,e,n=null){return function(...o){return t.apply(n,o),e.apply(n,o)}}function na(t,e){const n=Gt({},t);return Object.keys(e).forEach(o=>{n[o]?n[o]=ea(t[o],e[o]):n[o]=e[o]}),n}function oa(t){return t instanceof HTMLElement}function to(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function ra(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const ia=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function eo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,o)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eo(Object(n),!0).forEach(function(o){aa(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function ke(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ke=function(e){return typeof e}:ke=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(t)}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(){return kt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},kt.apply(this,arguments)}function la(t,e){if(t==null)return{};var n={},o=Object.keys(t),r,i;for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function sa(t,e){if(t==null)return{};var n=la(t,e),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)o=i[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var ca="1.15.2";function Ot(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Pt=Ot(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Se=Ot(/Edge/i),no=Ot(/firefox/i),pe=Ot(/safari/i)&&!Ot(/chrome/i)&&!Ot(/android/i),$o=Ot(/iP(ad|od|hone)/i),Wo=Ot(/chrome/i)&&Ot(/android/i),Xo={capture:!1,passive:!1};function V(t,e,n){t.addEventListener(e,n,!Pt&&Xo)}function M(t,e,n){t.removeEventListener(e,n,!Pt&&Xo)}function je(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ua(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mt(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&je(t,e):je(t,e))||o&&t===n)return t;if(t===n)break}while(t=ua(t))}return null}var oo=/\s+/g;function lt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(oo," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(oo," ")}}function T(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Zt(t,e){var n="";if(typeof t=="string")n=t;else do{var o=T(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function jo(t,e,n){if(t){var o=t.getElementsByTagName(e),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}return[]}function St(){var t=document.scrollingElement;return t||document.documentElement}function Z(t,e,n,o,r){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,s,l,u,c,d;if(t!==window&&t.parentNode&&t!==St()?(i=t.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,c=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Pt))do if(r&&r.getBoundingClientRect&&(T(r,"transform")!=="none"||n&&T(r,"position")!=="static")){var g=r.getBoundingClientRect();a-=g.top+parseInt(T(r,"border-top-width")),s-=g.left+parseInt(T(r,"border-left-width")),l=a+i.height,u=s+i.width;break}while(r=r.parentNode);if(o&&t!==window){var p=Zt(r||t),b=p&&p.a,v=p&&p.d;p&&(a/=v,s/=b,d/=b,c/=v,l=a+c,u=s+d)}return{top:a,left:s,bottom:l,right:u,width:d,height:c}}}function ro(t,e,n){for(var o=Lt(t,!0),r=Z(t)[e];o;){var i=Z(o)[n],a=void 0;if(a=r>=i,!a)return o;if(o===St())break;o=Lt(o,!1)}return!1}function ne(t,e,n,o){for(var r=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==O.ghost&&(o||a[i]!==O.dragged)&&mt(a[i],n.draggable,t,!1)){if(r===e)return a[i];r++}i++}return null}function In(t,e){for(var n=t.lastElementChild;n&&(n===O.ghost||T(n,"display")==="none"||e&&!je(n,e));)n=n.previousElementSibling;return n||null}function ft(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==O.clone&&(!e||je(t,e))&&n++;return n}function io(t){var e=0,n=0,o=St();if(t)do{var r=Zt(t),i=r.a,a=r.d;e+=t.scrollLeft*i,n+=t.scrollTop*a}while(t!==o&&(t=t.parentNode));return[e,n]}function da(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Lt(t,e){if(!t||!t.getBoundingClientRect)return St();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=T(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return St();if(o||e)return n;o=!0}}while(n=n.parentNode);return St()}function fa(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function sn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var he;function Yo(t,e){return function(){if(!he){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),he=setTimeout(function(){he=void 0},e)}}}function pa(){clearTimeout(he),he=void 0}function Ho(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function zo(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Uo(t,e,n){var o={};return Array.from(t.children).forEach(function(r){var i,a,s,l;if(!(!mt(r,e.draggable,t,!1)||r.animated||r===n)){var u=Z(r);o.left=Math.min((i=o.left)!==null&&i!==void 0?i:1/0,u.left),o.top=Math.min((a=o.top)!==null&&a!==void 0?a:1/0,u.top),o.right=Math.max((s=o.right)!==null&&s!==void 0?s:-1/0,u.right),o.bottom=Math.max((l=o.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var ut="Sortable"+new Date().getTime();function ha(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(T(o,"display")==="none"||o===O.ghost)){t.push({target:o,rect:Z(o)});var r=_t({},t[t.length-1].rect);if(o.thisAnimationDuration){var i=Zt(o,!0);i&&(r.top-=i.f,r.left-=i.e)}o.fromRect=r}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(da(t,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,i=0;t.forEach(function(a){var s=0,l=a.target,u=l.fromRect,c=Z(l),d=l.prevFromRect,g=l.prevToRect,p=a.rect,b=Zt(l,!0);b&&(c.top-=b.f,c.left-=b.e),l.toRect=c,l.thisAnimationDuration&&sn(d,c)&&!sn(u,c)&&(p.top-c.top)/(p.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(s=ma(p,d,g,o.options)),sn(c,u)||(l.prevFromRect=u,l.prevToRect=c,s||(s=o.options.animation),o.animate(l,p,c,s)),s&&(r=!0,i=Math.max(i,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),t=[]},animate:function(n,o,r,i){if(i){T(n,"transition",""),T(n,"transform","");var a=Zt(this.el),s=a&&a.a,l=a&&a.d,u=(o.left-r.left)/(s||1),c=(o.top-r.top)/(l||1);n.animatingX=!!u,n.animatingY=!!c,T(n,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=ga(n),T(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),T(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){T(n,"transition",""),T(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function ga(t){return t.offsetWidth}function ma(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var Ht=[],cn={initializeByDefault:!0},Ce={mount:function(t){for(var e in cn)cn.hasOwnProperty(e)&&!(e in t)&&(t[e]=cn[e]);Ht.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Ht.push(t)},pluginEvent:function(t,e,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=t+"Global";Ht.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r](_t({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](_t({sortable:e},n)))})},initializePlugins:function(t,e,n,o){Ht.forEach(function(a){var s=a.pluginName;if(!(!t.options[s]&&!a.initializeByDefault)){var l=new a(t,e,t.options);l.sortable=t,l.options=t.options,t[s]=l,kt(n,l.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var i=this.modifyOption(t,r,t.options[r]);typeof i<"u"&&(t.options[r]=i)}},getEventProperties:function(t,e){var n={};return Ht.forEach(function(o){typeof o.eventProperties=="function"&&kt(n,o.eventProperties.call(e[o.pluginName],t))}),n},modifyOption:function(t,e,n){var o;return Ht.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[e]=="function"&&(o=r.optionListeners[e].call(t[r.pluginName],n))}),o}};function va(t){var e=t.sortable,n=t.rootEl,o=t.name,r=t.targetEl,i=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,g=t.originalEvent,p=t.putSortable,b=t.extraEventProperties;if(e=e||n&&n[ut],!!e){var v,m=e.options,f="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Pt&&!Se?v=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(o,!0,!0)),v.to=a||n,v.from=s||n,v.item=r||n,v.clone=i,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=d,v.originalEvent=g,v.pullMode=p?p.lastPutMode:void 0;var h=_t(_t({},b),Ce.getEventProperties(o,e));for(var w in h)v[w]=h[w];n&&n.dispatchEvent(v),m[f]&&m[f].call(e,v)}}var ba=["evt"],at=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,r=sa(n,ba);Ce.pluginEvent.bind(O)(t,e,_t({dragEl:y,parentEl:q,ghostEl:k,rootEl:Y,nextEl:Wt,lastDownEl:Pe,cloneEl:H,cloneHidden:Mt,dragStarted:ae,putSortable:nt,activeSortable:O.active,originalEvent:o,oldIndex:Kt,oldDraggableIndex:ge,newIndex:st,newDraggableIndex:Rt,hideGhostForTarget:Jo,unhideGhostForTarget:Qo,cloneNowHidden:function(){Mt=!0},cloneNowShown:function(){Mt=!1},dispatchSortableEvent:function(i){it({sortable:e,name:i,originalEvent:o})}},r))};function it(t){va(_t({putSortable:nt,cloneEl:H,targetEl:y,rootEl:Y,oldIndex:Kt,oldDraggableIndex:ge,newIndex:st,newDraggableIndex:Rt},t))}var y,q,k,Y,Wt,Pe,H,Mt,Kt,st,ge,Rt,Ee,nt,Ut=!1,Ye=!1,He=[],Vt,gt,un,dn,ao,lo,ae,zt,me,ve=!1,De=!1,Ie,ot,fn=[],xn=!1,ze=[],Ze=typeof document<"u",Ae=$o,so=Se||Pt?"cssFloat":"float",ya=Ze&&!Wo&&!$o&&"draggable"in document.createElement("div"),qo=function(){if(Ze){if(Pt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Go=function(t,e){var n=T(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=ne(t,0,e),i=ne(t,1,e),a=r&&T(r),s=i&&T(i),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Z(r).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Z(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return i&&(s.clear==="both"||s.clear===c)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=o&&n[so]==="none"||i&&n[so]==="none"&&l+u>o)?"vertical":"horizontal"},wa=function(t,e,n){var o=n?t.left:t.top,r=n?t.right:t.bottom,i=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return o===a||r===s||o+i/2===a+l/2},xa=function(t,e){var n;return He.some(function(o){var r=o[ut].options.emptyInsertThreshold;if(!(!r||In(o))){var i=Z(o),a=t>=i.left-r&&t<=i.right+r,s=e>=i.top-r&&e<=i.bottom+r;if(a&&s)return n=o}}),n},Ko=function(t){function e(r,i){return function(a,s,l,u){var c=a.options.group.name&&s.options.group.name&&a.options.group.name===s.options.group.name;if(r==null&&(i||c))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return e(r(a,s,l,u),i)(a,s,l,u);var d=(i?a:s).options.group.name;return r===!0||typeof r=="string"&&r===d||r.join&&r.indexOf(d)>-1}}var n={},o=t.group;(!o||ke(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},Jo=function(){!qo&&k&&T(k,"display","none")},Qo=function(){!qo&&k&&T(k,"display","")};Ze&&!Wo&&document.addEventListener("click",function(t){if(Ye)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ye=!1,!1},!0);var $t=function(t){if(y){t=t.touches?t.touches[0]:t;var e=xa(t.clientX,t.clientY);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[ut]._onDragOver(n)}}},Sa=function(t){y&&y.parentNode[ut]._isOutsideThisEl(t.target)};function O(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=kt({},e),t[ut]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Go(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,a){i.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&!pe,emptyInsertThreshold:5};Ce.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);Ko(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:ya,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?V(t,"pointerdown",this._onTapStart):(V(t,"mousedown",this._onTapStart),V(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(V(t,"dragover",this),V(t,"dragenter",this)),He.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),kt(this,ha())}O.prototype={constructor:O,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(zt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,y):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,r=o.preventOnFilter,i=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,u=o.filter;if(ka(n),!y&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||o.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&pe&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=mt(s,o.draggable,n,!1),!(s&&s.animated)&&Pe!==s)){if(Kt=ft(s),ge=ft(s,o.draggable),typeof u=="function"){if(u.call(this,t,s,this)){it({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),at("filter",e,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=mt(l,c.trim(),n,!1),c)return it({sortable:e,rootEl:c,name:"filter",targetEl:s,fromEl:n,toEl:n}),at("filter",e,{evt:t}),!0}),u)){r&&t.cancelable&&t.preventDefault();return}o.handle&&!mt(l,o.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var o=this,r=o.el,i=o.options,a=r.ownerDocument,s;if(n&&!y&&n.parentNode===r){var l=Z(n);if(Y=r,y=n,q=y.parentNode,Wt=y.nextSibling,Pe=n,Ee=i.group,O.dragged=y,Vt={target:y,clientX:(e||t).clientX,clientY:(e||t).clientY},ao=Vt.clientX-l.left,lo=Vt.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,y.style["will-change"]="all",s=function(){if(at("delayEnded",o,{evt:t}),O.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!no&&o.nativeDraggable&&(y.draggable=!0),o._triggerDragStart(t,e),it({sortable:o,name:"choose",originalEvent:t}),lt(y,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){jo(y,u.trim(),pn)}),V(a,"dragover",$t),V(a,"mousemove",$t),V(a,"touchmove",$t),V(a,"mouseup",o._onDrop),V(a,"touchend",o._onDrop),V(a,"touchcancel",o._onDrop),no&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),at("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Se||Pt))){if(O.eventCanceled){this._onDrop();return}V(a,"mouseup",o._disableDelayedDrag),V(a,"touchend",o._disableDelayedDrag),V(a,"touchcancel",o._disableDelayedDrag),V(a,"mousemove",o._delayedDragTouchMoveHandler),V(a,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&V(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(s,i.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&pn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;M(t,"mouseup",this._disableDelayedDrag),M(t,"touchend",this._disableDelayedDrag),M(t,"touchcancel",this._disableDelayedDrag),M(t,"mousemove",this._delayedDragTouchMoveHandler),M(t,"touchmove",this._delayedDragTouchMoveHandler),M(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?V(document,"pointermove",this._onTouchMove):e?V(document,"touchmove",this._onTouchMove):V(document,"mousemove",this._onTouchMove):(V(y,"dragend",this),V(Y,"dragstart",this._onDragStart));try{document.selection?Re(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Ut=!1,Y&&y){at("dragStarted",this,{evt:e}),this.nativeDraggable&&V(document,"dragover",Sa);var n=this.options;!t&&lt(y,n.dragClass,!1),lt(y,n.ghostClass,!0),O.active=this,t&&this._appendGhost(),it({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(gt){this._lastX=gt.clientX,this._lastY=gt.clientY,Jo();for(var t=document.elementFromPoint(gt.clientX,gt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(gt.clientX,gt.clientY),t!==e);)e=t;if(y.parentNode[ut]._isOutsideThisEl(t),e)do{if(e[ut]){var n=void 0;if(n=e[ut]._onDragOver({clientX:gt.clientX,clientY:gt.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Qo()}},_onTouchMove:function(t){if(Vt){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,r=t.touches?t.touches[0]:t,i=k&&Zt(k,!0),a=k&&i&&i.a,s=k&&i&&i.d,l=Ae&&ot&&io(ot),u=(r.clientX-Vt.clientX+o.x)/(a||1)+(l?l[0]-fn[0]:0)/(a||1),c=(r.clientY-Vt.clientY+o.y)/(s||1)+(l?l[1]-fn[1]:0)/(s||1);if(!O.active&&!Ut){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(k){i?(i.e+=u-(un||0),i.f+=c-(dn||0)):i={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");T(k,"webkitTransform",d),T(k,"mozTransform",d),T(k,"msTransform",d),T(k,"transform",d),un=u,dn=c,gt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!k){var t=this.options.fallbackOnBody?document.body:Y,e=Z(y,!0,Ae,!0,t),n=this.options;if(Ae){for(ot=t;T(ot,"position")==="static"&&T(ot,"transform")==="none"&&ot!==document;)ot=ot.parentNode;ot!==document.body&&ot!==document.documentElement?(ot===document&&(ot=St()),e.top+=ot.scrollTop,e.left+=ot.scrollLeft):ot=St(),fn=io(ot)}k=y.cloneNode(!0),lt(k,n.ghostClass,!1),lt(k,n.fallbackClass,!0),lt(k,n.dragClass,!0),T(k,"transition",""),T(k,"transform",""),T(k,"box-sizing","border-box"),T(k,"margin",0),T(k,"top",e.top),T(k,"left",e.left),T(k,"width",e.width),T(k,"height",e.height),T(k,"opacity","0.8"),T(k,"position",Ae?"absolute":"fixed"),T(k,"zIndex","100000"),T(k,"pointerEvents","none"),O.ghost=k,t.appendChild(k),T(k,"transform-origin",ao/parseInt(k.style.width)*100+"% "+lo/parseInt(k.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,r=n.options;if(at("dragStart",this,{evt:t}),O.eventCanceled){this._onDrop();return}at("setupClone",this),O.eventCanceled||(H=zo(y),H.removeAttribute("id"),H.draggable=!1,H.style["will-change"]="",this._hideClone(),lt(H,this.options.chosenClass,!1),O.clone=H),n.cloneId=Re(function(){at("clone",n),!O.eventCanceled&&(n.options.removeCloneOnHide||Y.insertBefore(H,y),n._hideClone(),it({sortable:n,name:"clone"}))}),!e&&lt(y,r.dragClass,!0),e?(Ye=!0,n._loopId=setInterval(n._emulateDragOver,50)):(M(document,"mouseup",n._onDrop),M(document,"touchend",n._onDrop),M(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,y)),V(document,"drop",n),T(y,"transform","translateZ(0)")),Ut=!0,n._dragStartId=Re(n._dragStarted.bind(n,e,t)),V(document,"selectstart",n),ae=!0,pe&&T(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,o,r,i,a=this.options,s=a.group,l=O.active,u=Ee===s,c=a.sort,d=nt||l,g,p=this,b=!1;if(xn)return;function v(B,G){at(B,p,_t({evt:t,isOwner:u,axis:g?"vertical":"horizontal",revert:i,dragRect:o,targetRect:r,canSort:c,fromSortable:d,target:n,completed:f,onMove:function(et,oe){return Te(Y,e,y,o,et,Z(et),t,oe)},changed:h},G))}function m(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function f(B){return v("dragOverCompleted",{insertion:B}),B&&(u?l._hideClone():l._showClone(p),p!==d&&(lt(y,nt?nt.options.ghostClass:l.options.ghostClass,!1),lt(y,a.ghostClass,!0)),nt!==p&&p!==O.active?nt=p:p===O.active&&nt&&(nt=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===y&&!y.animated||n===e&&!n.animated)&&(zt=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(y.parentNode[ut]._isOutsideThisEl(t.target),!B&&$t(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function h(){st=ft(y),Rt=ft(y,a.draggable),it({sortable:p,name:"change",toEl:e,newIndex:st,newDraggableIndex:Rt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=mt(n,a.draggable,e,!0),v("dragOver"),O.eventCanceled)return b;if(y.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return f(!1);if(Ye=!1,l&&!a.disabled&&(u?c||(i=q!==Y):nt===this||(this.lastPutMode=Ee.checkPull(this,l,y,t))&&s.checkPut(this,l,y,t))){if(g=this._getDirection(t,n)==="vertical",o=Z(y),v("dragOverValid"),O.eventCanceled)return b;if(i)return q=Y,m(),this._hideClone(),v("revert"),O.eventCanceled||(Wt?Y.insertBefore(y,Wt):Y.appendChild(y)),f(!0);var w=In(e,a.draggable);if(!w||Da(t,g,this)&&!w.animated){if(w===y)return f(!1);if(w&&e===t.target&&(n=w),n&&(r=Z(n)),Te(Y,e,y,o,n,r,t,!!n)!==!1)return m(),w&&w.nextSibling?e.insertBefore(y,w.nextSibling):e.appendChild(y),q=e,h(),f(!0)}else if(w&&Ea(t,g,this)){var D=ne(e,0,a,!0);if(D===y)return f(!1);if(n=D,r=Z(n),Te(Y,e,y,o,n,r,t,!1)!==!1)return m(),e.insertBefore(y,D),q=e,h(),f(!0)}else if(n.parentNode===e){r=Z(n);var _=0,W,R=y.parentNode!==e,C=!wa(y.animated&&y.toRect||o,n.animated&&n.toRect||r,g),E=g?"top":"left",x=ro(n,"top","top")||ro(y,"top","top"),P=x?x.scrollTop:void 0;zt!==n&&(W=r[E],ve=!1,De=!C&&a.invertSwap||R),_=Aa(t,n,r,g,C?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,De,zt===n);var S;if(_!==0){var I=ft(y);do I-=_,S=q.children[I];while(S&&(T(S,"display")==="none"||S===k))}if(_===0||S===n)return f(!1);zt=n,me=_;var L=n.nextElementSibling,N=!1;N=_===1;var F=Te(Y,e,y,o,n,r,t,N);if(F!==!1)return(F===1||F===-1)&&(N=F===1),xn=!0,setTimeout(_a,30),m(),N&&!L?e.appendChild(y):n.parentNode.insertBefore(y,N?L:n),x&&Ho(x,0,P-x.scrollTop),q=y.parentNode,W!==void 0&&!De&&(Ie=Math.abs(W-Z(n)[E])),h(),f(!0)}if(e.contains(y))return f(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){M(document,"mousemove",this._onTouchMove),M(document,"touchmove",this._onTouchMove),M(document,"pointermove",this._onTouchMove),M(document,"dragover",$t),M(document,"mousemove",$t),M(document,"touchmove",$t)},_offUpEvents:function(){var t=this.el.ownerDocument;M(t,"mouseup",this._onDrop),M(t,"touchend",this._onDrop),M(t,"pointerup",this._onDrop),M(t,"touchcancel",this._onDrop),M(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(st=ft(y),Rt=ft(y,n.draggable),at("drop",this,{evt:t}),q=y&&y.parentNode,st=ft(y),Rt=ft(y,n.draggable),O.eventCanceled){this._nulling();return}Ut=!1,De=!1,ve=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sn(this.cloneId),Sn(this._dragStartId),this.nativeDraggable&&(M(document,"drop",this),M(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pe&&T(document.body,"user-select",""),T(y,"transform",""),t&&(ae&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),k&&k.parentNode&&k.parentNode.removeChild(k),(Y===q||nt&&nt.lastPutMode!=="clone")&&H&&H.parentNode&&H.parentNode.removeChild(H),y&&(this.nativeDraggable&&M(y,"dragend",this),pn(y),y.style["will-change"]="",ae&&!Ut&&lt(y,nt?nt.options.ghostClass:this.options.ghostClass,!1),lt(y,this.options.chosenClass,!1),it({sortable:this,name:"unchoose",toEl:q,newIndex:null,newDraggableIndex:null,originalEvent:t}),Y!==q?(st>=0&&(it({rootEl:q,name:"add",toEl:q,fromEl:Y,originalEvent:t}),it({sortable:this,name:"remove",toEl:q,originalEvent:t}),it({rootEl:q,name:"sort",toEl:q,fromEl:Y,originalEvent:t}),it({sortable:this,name:"sort",toEl:q,originalEvent:t})),nt&&nt.save()):st!==Kt&&st>=0&&(it({sortable:this,name:"update",toEl:q,originalEvent:t}),it({sortable:this,name:"sort",toEl:q,originalEvent:t})),O.active&&((st==null||st===-1)&&(st=Kt,Rt=ge),it({sortable:this,name:"end",toEl:q,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){at("nulling",this),Y=y=q=k=Wt=H=Pe=Mt=Vt=gt=ae=st=Rt=Kt=ge=zt=me=nt=Ee=O.dragged=O.ghost=O.clone=O.active=null,ze.forEach(function(t){t.checked=!0}),ze.length=un=dn=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":y&&(this._onDragOver(t),Ca(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,o=0,r=n.length,i=this.options;o<r;o++)e=n[o],mt(e,i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Oa(e));return t},sort:function(t,e){var n={},o=this.el;this.toArray().forEach(function(r,i){var a=o.children[i];mt(a,this.options.draggable,o,!1)&&(n[r]=a)},this),e&&this.captureAnimationState(),t.forEach(function(r){n[r]&&(o.removeChild(n[r]),o.appendChild(n[r]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return mt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var o=Ce.modifyOption(this,t,e);typeof o<"u"?n[t]=o:n[t]=e,t==="group"&&Ko(n)},destroy:function(){at("destroy",this);var t=this.el;t[ut]=null,M(t,"mousedown",this._onTapStart),M(t,"touchstart",this._onTapStart),M(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(M(t,"dragover",this),M(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),He.splice(He.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Mt){if(at("hideClone",this),O.eventCanceled)return;T(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),Mt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Mt){if(at("showClone",this),O.eventCanceled)return;y.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(H,y):Wt?Y.insertBefore(H,Wt):Y.appendChild(H),this.options.group.revertClone&&this.animate(y,H),T(H,"display",""),Mt=!1}}};function Ca(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Te(t,e,n,o,r,i,a,s){var l,u=t[ut],c=u.options.onMove,d;return window.CustomEvent&&!Pt&&!Se?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=r||e,l.relatedRect=i||Z(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),c&&(d=c.call(u,l,a)),d}function pn(t){t.draggable=!1}function _a(){xn=!1}function Ea(t,e,n){var o=Z(ne(n.el,0,n.options,!0)),r=Uo(n.el,n.options,k),i=10;return e?t.clientX<r.left-i||t.clientY<o.top&&t.clientX<o.right:t.clientY<r.top-i||t.clientY<o.bottom&&t.clientX<o.left}function Da(t,e,n){var o=Z(In(n.el,n.options.draggable)),r=Uo(n.el,n.options,k),i=10;return e?t.clientX>r.right+i||t.clientY>o.bottom&&t.clientX>o.left:t.clientY>r.bottom+i||t.clientX>o.right&&t.clientY>o.top}function Aa(t,e,n,o,r,i,a,s){var l=o?t.clientY:t.clientX,u=o?n.height:n.width,c=o?n.top:n.left,d=o?n.bottom:n.right,g=!1;if(!a){if(s&&Ie<u*r){if(!ve&&(me===1?l>c+u*i/2:l<d-u*i/2)&&(ve=!0),ve)g=!0;else if(me===1?l<c+Ie:l>d-Ie)return-me}else if(l>c+u*(1-r)/2&&l<d-u*(1-r)/2)return Ta(e)}return g=g||a,g&&(l<c+u*i/2||l>d-u*i/2)?l>c+u/2?1:-1:0}function Ta(t){return ft(y)<ft(t)?1:-1}function Oa(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function ka(t){ze.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&ze.push(o)}}function Re(t){return setTimeout(t,0)}function Sn(t){return clearTimeout(t)}Ze&&V(document,"touchmove",function(t){(O.active||Ut)&&t.cancelable&&t.preventDefault()});O.utils={on:V,off:M,css:T,find:jo,is:function(t,e){return!!mt(t,e,t,!1)},extend:fa,throttle:Yo,closest:mt,toggleClass:lt,clone:zo,index:ft,nextTick:Re,cancelNextTick:Sn,detectDirection:Go,getChild:ne};O.get=function(t){return t[ut]};O.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(O.utils=_t(_t({},O.utils),o.utils)),Ce.mount(o)})};O.create=function(t,e){return new O(t,e)};O.version=ca;var K=[],le,Cn,_n=!1,hn,gn,Ue,se;function Pa(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):this.options.supportPointer?V(document,"pointermove",this._handleFallbackAutoScroll):n.touches?V(document,"touchmove",this._handleFallbackAutoScroll):V(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?M(document,"dragover",this._handleAutoScroll):(M(document,"pointermove",this._handleFallbackAutoScroll),M(document,"touchmove",this._handleFallbackAutoScroll),M(document,"mousemove",this._handleFallbackAutoScroll)),co(),Me(),pa()},nulling:function(){Ue=Cn=le=_n=se=hn=gn=null,K.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var o=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(Ue=e,n||this.options.forceAutoScrollFallback||Se||Pt||pe){mn(e,this.options,a,n);var s=Lt(a,!0);_n&&(!se||r!==hn||i!==gn)&&(se&&co(),se=setInterval(function(){var l=Lt(document.elementFromPoint(r,i),!0);l!==s&&(s=l,Me()),mn(e,o.options,l,n)},10),hn=r,gn=i)}else{if(!this.options.bubbleScroll||Lt(a,!0)===St()){Me();return}mn(e,this.options,Lt(a,!1),!1)}}},kt(t,{pluginName:"scroll",initializeByDefault:!0})}function Me(){K.forEach(function(t){clearInterval(t.pid)}),K=[]}function co(){clearInterval(se)}var mn=Yo(function(t,e,n,o){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=St(),u=!1,c;Cn!==n&&(Cn=n,Me(),le=e.scroll,c=e.scrollFn,le===!0&&(le=Lt(n,!0)));var d=0,g=le;do{var p=g,b=Z(p),v=b.top,m=b.bottom,f=b.left,h=b.right,w=b.width,D=b.height,_=void 0,W=void 0,R=p.scrollWidth,C=p.scrollHeight,E=T(p),x=p.scrollLeft,P=p.scrollTop;p===l?(_=w<R&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),W=D<C&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(_=w<R&&(E.overflowX==="auto"||E.overflowX==="scroll"),W=D<C&&(E.overflowY==="auto"||E.overflowY==="scroll"));var S=_&&(Math.abs(h-r)<=a&&x+w<R)-(Math.abs(f-r)<=a&&!!x),I=W&&(Math.abs(m-i)<=a&&P+D<C)-(Math.abs(v-i)<=a&&!!P);if(!K[d])for(var L=0;L<=d;L++)K[L]||(K[L]={});(K[d].vx!=S||K[d].vy!=I||K[d].el!==p)&&(K[d].el=p,K[d].vx=S,K[d].vy=I,clearInterval(K[d].pid),(S!=0||I!=0)&&(u=!0,K[d].pid=setInterval((function(){o&&this.layer===0&&O.active._onTouchMove(Ue);var N=K[this.layer].vy?K[this.layer].vy*s:0,F=K[this.layer].vx?K[this.layer].vx*s:0;typeof c=="function"&&c.call(O.dragged.parentNode[ut],F,N,t,Ue,K[this.layer].el)!=="continue"||Ho(K[this.layer].el,F,N)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&g!==l&&(g=Lt(g,!1)));_n=u}},30),Zo=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,r=t.activeSortable,i=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;a();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Rn(){}Rn.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=ne(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Zo};kt(Rn,{pluginName:"revertOnSpill"});function Mn(){}Mn.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,o=n||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:Zo};kt(Mn,{pluginName:"removeOnSpill"});O.mount(new Pa);O.mount(Mn,Rn);function Ia(t){return t==null?t:JSON.parse(JSON.stringify(t))}function Ra(t){Dn()&&xo(t)}function Ma(t){Dn()?yo(t):wo(t)}let tr=null,er=null;function uo(t=null,e=null){tr=t,er=e}function La(){return{data:tr,clonedData:er}}const fo=Symbol("cloneElement");function Na(...t){var e,n;const o=(e=Dn())==null?void 0:e.proxy;let r=null;const i=t[0];let[,a,s]=t;Array.isArray(A(a))||(s=a,a=null);let l=null;const{immediate:u=!0,clone:c=Ia,customUpdate:d}=(n=A(s))!=null?n:{};function g(C){var E;const{from:x,oldIndex:P,item:S}=C;r=Array.from(x.childNodes);const I=A((E=A(a))==null?void 0:E[P]),L=c(I);uo(I,L),S[fo]=L}function p(C){const E=C.item[fo];if(!Qi(E)){if(ln(C.item),ce(a)){const x=[...A(a)];a.value=Qn(x,C.newDraggableIndex,E);return}Qn(A(a),C.newDraggableIndex,E)}}function b(C){const{from:E,item:x,oldIndex:P,oldDraggableIndex:S,pullMode:I,clone:L}=C;if(Zn(E,x,P),I==="clone"){ln(L);return}if(ce(a)){const N=[...A(a)];a.value=Jn(N,S);return}Jn(A(a),S)}function v(C){if(d){d(C);return}const{from:E,item:x,oldIndex:P,oldDraggableIndex:S,newDraggableIndex:I}=C;if(ln(x),Zn(E,x,P),ce(a)){const L=[...A(a)];a.value=Kn(L,S,I);return}Kn(A(a),S,I)}function m(C){const{newIndex:E,oldIndex:x,from:P,to:S}=C;let I=null;const L=E===x&&P===S;try{if(L){let N=null;r?.some((F,B)=>{if(N&&r?.length!==S.childNodes.length)return P.insertBefore(N,F.nextSibling),!0;const G=S.childNodes[B];N=S?.replaceChild(F,G)})}}catch(N){I=N}finally{r=null}wo(()=>{if(uo(),I)throw I})}const f={onUpdate:v,onStart:g,onAdd:p,onRemove:b,onEnd:m};function h(C){const E=A(i);return C||(C=Zi(E)?ta(E,o?.$el):E),C&&!oa(C)&&(C=C.$el),C||Gi("Root element not found"),C}function w(){var C;const E=(C=A(s))!=null?C:{},{immediate:x,clone:P}=E,S=Bo(E,["immediate","clone"]);return to(S,(I,L)=>{ra(I)&&(S[I]=(N,...F)=>{const B=La();return ia(N,B),L(N,...F)})}),na(a===null?{}:f,S)}const D=C=>{C=h(C),l&&_.destroy(),l=new O(C,w())};Jt(()=>s,()=>{l&&to(w(),(C,E)=>{l?.option(C,E)})},{deep:!0});const _={option:(C,E)=>l?.option(C,E),destroy:()=>{l?.destroy(),l=null},save:()=>l?.save(),toArray:()=>l?.toArray(),closest:(...C)=>l?.closest(...C)},W=()=>_?.option("disabled",!0),R=()=>_?.option("disabled",!1);return Ma(()=>{u&&D()}),Ra(_.destroy),Gt({start:D,pause:W,resume:R},_)}const En=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],Fa=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...En.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],Ba=qe({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:Fa,emits:["update:modelValue",...En],setup(t,{slots:e,emit:n,expose:o,attrs:r}){const i=En.reduce((c,d)=>{const g=`on${d.replace(/^\S/,p=>p.toUpperCase())}`;return c[g]=(...p)=>n(d,...p),c},{}),a=Q(()=>{const c=fr(t),{modelValue:d}=c,g=Bo(c,["modelValue"]),p=Object.entries(g).reduce((b,[v,m])=>{const f=A(m);return f!==void 0&&(b[v]=f),b},{});return Gt(Gt({},i),Ji(Gt(Gt({},r),p)))}),s=Q({get:()=>t.modelValue,set:c=>n("update:modelValue",c)}),l=U(),u=bn(Na(t.target||l,s,a));return o(u),()=>{var c;return pr(t.tag||"div",{ref:l},(c=e?.default)==null?void 0:c.call(e,u))}}}),Va={key:1,class:"list-row"},$a=qe({__name:"DraggableList",props:{items:{},draggableOptions:{},itemProps:{type:Function}},emits:["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],setup(t,{emit:e}){const n=t,o=hr(),r=Q(()=>{const{onUpdate:h,onStart:w,onAdd:D,onRemove:_,onChoose:W,onUnchoose:R,onEnd:C,onSort:E,onFilter:x,onClone:P,onMove:S,onChange:I,...L}=n.draggableOptions??{};return L}),i=e;function a(h){i("update",h)}function s(h){i("start",h)}function l(h){i("add",h)}function u(h){i("remove",h)}function c(h){i("choose",h)}function d(h){i("unchoose",h)}function g(h){i("end",h)}function p(h){i("sort",h)}function b(h){i("filter",h)}function v(h){i("clone",h)}function m(h,w){i("move",h,w)}function f(h){i("change",h)}return(h,w)=>(J(),mo(A(Ba),Le({modelValue:n.items,"onUpdate:modelValue":w[0]||(w[0]=D=>n.items=D)},A(r),{onUpdate:a,onStart:s,onAdd:l,onRemove:u,onChoose:c,onUnchoose:d,onEnd:g,onSort:p,onFilter:b,onClone:v,onMove:m,onChange:f,class:"list",tag:"ul"}),{default:At(()=>[n.items?.length?(J(!0),tt(ue,{key:0},de(n.items,D=>(J(),tt("li",Le({class:"list-row"},{ref_for:!0},n.itemProps?.(D),{key:D.id}),[qt(h.$slots,"item",{item:D})],16))),128)):Ne("",!0),!n.items?.length&&o.empty?(J(),tt("li",Va,[qt(h.$slots,"empty")])):Ne("",!0)]),_:3},16,["modelValue"]))}}),Wa=Object.assign($a,{__name:"DraggableList"});async function Xa(t,e){const n=gr(t),o=Q(()=>po(pt(n))),r=Q(()=>Er(pt(o))),i=U(!1),a=U(null),s=U(new Map),{data:l}=Dr("categories"),{data:u,pending:c,error:d,refresh:g}=So(`shoppingListDetails:${o.value}`,async()=>{const x=await yt.getShoppingListAsync(o.value);return Bt(x)},{getCachedData(x){const P=mr(),S=P.payload.data[x]||P.static.data[x];if(!S)return;const I=new Date(S.fetchedAt);if(I.setTime(I.getTime()+300*1e3),new Date<I)return S},server:!1,...e}),{listToSync:p,getItem:b,upsertItem:v,deleteItem:m,releaseAction:f,isActionBlocked:h,blockAction:w}=Ar(u),D=Q(()=>p.value&&l.value?Be(_r(p.value,l.value)):[]);async function _(){s.value.has(r.value)&&s.value.get(r.value)&&yt.unsubscribe(s.value.get(r.value));async function x(P){try{const S=Be(P);if(S.record?.shoppingListId!==o.value)return;const I=Tr(S);if(h(S.record?.id??S.oldRecord?.id,I))return;switch(I){case"insert":{const N=yt.getShoppingListProductAsync(S.record.id);if(!l.value)throw new Error("Categories not found");const F=l.value?.find(et=>et.id===S.record?.categoryId)??l.value?.[0];if(!F)throw new Error("Category not found");v({id:S.record.id,createdAt:new Date().toISOString(),quantity:S.record.quantity,unit:fe.GRAM.name,name:"Ładowanie...",inCart:S.record.inCart,category:F});const B=await N,G=Bt(B);v(G);break}case"update":{const N=yt.getShoppingListProductAsync(S.record.id);if(!l.value)throw new Error("Categories not found");if(!(l.value?.find(et=>et.id===S.record?.categoryId)??l.value?.[0]))throw new Error("Category not found");v(S.record);const B=await N,G=Bt(B);v(G);break}case"delete":m(S.oldRecord.id);break;default:throw new Error("Invalid payload")}}catch(S){console.error(S)}}return s.value.set(r.value,yt.listenForShoppingListChanges(o.value,x)),s.value.get(r.value)}async function W(x){if(!p.value)throw new Error("Shopping list not found");const P=b(x);if(!P.item)throw new Error("Product not found");i.value=!0,w(x,"update"),v({id:P.item.id,inCart:P.item.inCart},P.index,!0),yt.toggleProductInCartAsync(x).then(S=>{const I=Bt(S);v(I,P.index,!0)}).catch(S=>{v(P.item,P.index,!0),console.error(S)}).finally(()=>{i.value=!1,f(x,"update")})}async function R(x,P,S,I){if(x.name.trim()==="")throw new Error("Nazwa powinna być wypełniona");i.value=!0;const N=new Date().valueOf()*2;w(N,"insert"),yt.addToShoppingListAsync(po(x.listId),fe.valueOf(x.unit.name),x.quantity,x.name,x.categoryId).then(F=>{const B=Bt(F);P?.(B)}).catch(F=>{console.error(F),S?.(F)}).finally(()=>{i.value=!1,f(N,"insert"),I?.()})}async function C(x){i.value=!0,w(x,"delete"),yt.deleteFromShoppingListAsync(x).then(Bt).catch(P=>{console.error(P)}).finally(()=>{i.value=!1,f(x,"delete")})}async function E(x,P){i.value=!0,w(x,"update"),v({id:x,category:P}),yt.updateInShoppingListAsync(x,o.value,null,null,null,P.id).then(S=>{Bt(S)}).catch(S=>{console.error(S)}).finally(()=>{i.value=!1,f(x,"update")})}return yo(()=>{pt(e?.useAutoListenFor)?.includes("shoppingListChanges")&&_()}),xo(()=>{try{s.value.forEach(x=>{yt.unsubscribe(x)})}catch(x){console.error(x)}}),{shoppingListDetails:tn(p),loading:tn(Q(()=>c.value||i.value)),error:tn(Q(()=>d.value||a.value)),refresh:g,listenForShoppingListChanges:_,toggleInCart:W,addToShoppingList:R,switchProductCategory:E,deleteProductFromShoppingList:C,categoriesWithProducts:D}}function po(t){const e=Array.isArray(t)?t[0]:t;if(e==null)throw new Error(`Invalid list ID. It should be a string or number. Actual value: ${e}`);const n=parseInt(e,10);if(Number.isNaN(n))throw new Error(`Invalid list ID. Is not a number. Actual value: ${e}`);return n}const ja={class:"card flex flex-col max-w-xl m-auto max-h-screen"},Ya={class:"card-body bg-base-100 rounded-box shadow-md w-full overflow-y-auto"},Ha={class:"grid items-center gap-2 grid-cols-[45px_1rem_auto_45px] text-base"},za={class:"justify-self-end"},Ua={class:"btn btn-ghost btn-circle"},qa={class:"list-col-grow"},Ga={class:"badge badge-ghost badge-sm"},Ka=["value"],Ja=["aria-controls","value","onClick","onInput","onKeydown"],Qa={class:"list category-lists"},Za={class:"list-col-grow"},tl=["onClick"],el={key:1,class:"list-row"},nl={key:0,class:"flex flex-col gap-1"},ol={class:"text-error"},cl=qe({__name:"[id]",async setup(t){let e,n;const o=vr(),r=U(!1);function i(){r.value=!r.value}const a=fe.values(),{categoriesWithProducts:s,error:l,loading:u,toggleInCart:c,addToShoppingList:d,deleteProductFromShoppingList:g,switchProductCategory:p,shoppingListDetails:b}=([e,n]=Fn(()=>Xa(o.params.id,{useAutoListenFor:["shoppingListChanges"]})),e=await e,n(),e),v=Q(()=>b.value.reduce(($,X)=>$+ +!X.inCart,0)),m=U(null),f={group:"shopping-list",animation:200,handle:".handle",onEnd:$=>{if(kr($.data))return;const X=I.value?.find(ht=>ht.id===Number($.to.dataset.categoryId));X&&p($.data.id,X)},forceFallback:!0,fallbackClass:"hidden",onChoose:$=>{m.value=Date.now()}},h=bn({name:""}),w=bn({name:"",quantity:1,unit:fe.GRAM,categoryId:1}),D=Q(()=>[l.value,L.value].filter(Boolean)),_=U([]),W=U(!1),R=U(!1),C=U(-1);function E(){_.value.length>0&&(W.value=!0)}function x(){W.value=!1,C.value=-1}function P($){try{w.name=$.name,w.unit=fe.valueOf($.unit),x()}catch(X){console.error("selectSuggestion->",X)}}async function S($){if(!$||$.trim().length<2){_.value=[],x();return}R.value=!0;try{const X=await Pr.getProductSuggestionAsync(w.name);if("error"in X){_.value=[],x();return}if(!("result"in X)){_.value=[],x();return}const ht=Be(X.result);_.value=ht||[],E()}finally{R.value=!1}}const{data:I,error:L,status:N}=([e,n]=Fn(async()=>So("categories",async()=>{const $=await Or.getCategoriesAsync();if("error"in $)throw new Error($);if(!("result"in $))throw new Error(`Unsupported response type: ${$.constructor.name}`);return Be($.result)},{server:!1})),e=await e,n(),e),F=U(null),B=U(""),G=Q(()=>!B.value||B.value===F.value?.name?I.value:I.value?.filter(({name:$})=>new RegExp(B.value,"i").test($))),et=$=>{F.value=$,w.categoryId=$.id,B.value=$.name};async function oe($){d({listId:o.params.id,...w},()=>{$.currentTarget?.reset(),nr()},X=>{h.name=X.message})}function nr(){w.name="",w.quantity=1,h.name=""}function or($){m.value&&Date.now()-m.value>150||c($)}return($,X)=>{const ht=bo,rr=Cr,Ln=zi,ir=Wa;return J(),tt("div",ja,[z("div",Ya,[z("div",Ha,[rt(rr,{class:"btn btn-ghost btn-circle relative",to:"/"},{default:At(()=>[rt(ht,{name:"streamline-freehand:keyboard-arrow-return"})]),_:1}),rt(ht,{class:Fe([A(u)?"":"invisible","animate-spin text-info"]),name:"streamline-freehand:loading-star-1"},null,8,["class"]),z("span",za,"Pozostało: "+wt(A(v)),1),z("button",{class:"btn btn-ghost btn-circle",onClick:i},[rt(ht,{class:Fe([A(r)?"rotate-270":"rotate-90","transition-transform"]),name:"streamline-freehand:move-rectangle-left"},null,8,["class"])])]),rt(br,{name:"collapse"},{default:At(()=>[Oe(z("form",{class:"list-row-separator grid grid-cols-[80px_minmax(0,_auto)_45px]",onSubmit:en(oe,["prevent"])},[z("button",Ua,[rt(ht,{name:"streamline-freehand:add-sign-bold"})]),rt(Ln,{modelValue:A(w).name,"onUpdate:modelValue":X[0]||(X[0]=j=>A(w).name=j),"is-loading":A(R),suggestions:A(_),"label-key":"name","list-id":"suggestions",placeholder:"Nazwa produktu",wrapperClass:"col-span-2",onSearch:S,onSelect:P},{item:At(({item:j})=>[z("span",qa,wt(j.name),1),z("span",Ga,wt(j.unit||"szt."),1)]),_:1},8,["modelValue","is-loading","suggestions"]),Oe(z("input",{"onUpdate:modelValue":X[1]||(X[1]=j=>A(w).quantity=j),class:"input input-ghost",min:"1",required:"",type:"number"},null,512),[[vo,A(w).quantity]]),Oe(z("select",{"onUpdate:modelValue":X[2]||(X[2]=j=>A(w).unit=j),class:"select select-ghost col-span-2 w-full"},[X[5]||(X[5]=z("option",{disabled:"",selected:""},"Wybierz jednostkę",-1)),(J(!0),tt(ue,null,de(A(a),j=>(J(),tt("option",{key:j.name,value:j},wt(j.name),9,Ka))),128))],512),[[yr,A(w).unit]]),rt(Ln,{modelValue:A(B),"onUpdate:modelValue":X[3]||(X[3]=j=>ce(B)?B.value=j:null),"is-loading":A(N)==="pending",suggestions:A(G)??[],"label-key":"name","list-id":"categories",wrapperClass:"col-span-3",onSelect:et},{input:At(({value:j,listId:Dt,handleKeydown:Nn,handleClick:ar,handleInput:lr,bindFieldRef:sr})=>[z("div",{ref:sr,class:"flex items-center gap-2 input input-ghost w-full"},[rt(nn,{color:A(F)?.color??"323232",name:A(F)?.name??j},{label:At(()=>[z("input",{"aria-controls":Dt,value:j,"aria-autocomplete":"list",autocomplete:"off",placeholder:"Wybierz kategorię",role:"combobox",type:"text",onClick:ar,onInput:lr,onKeydown:Nn},null,40,Ja)]),_:2},1032,["color","name"]),rt(ht,{class:"autocomplete-arrow",name:"mdi:chevron-down"})],512)]),item:At(({item:j})=>[rt(nn,wr(xr(j)),null,16)]),_:1},8,["modelValue","is-loading","suggestions","onSelect"])],544),[[Sr,!A(r)]])]),_:1}),z("ul",Qa,[A(s).length?(J(!0),tt(ue,{key:0},de(A(s),j=>(J(),tt("li",{key:j.category.id,class:"category-list"},[rt(nn,Le({ref_for:!0},j.category),null,16),rt(ir,{"data-category-id":j.category.id,draggableOptions:f,itemProps:Dt=>({class:{"line-through":Dt.inCart},onClick:()=>or(Dt.id)}),items:j.products},{item:At(({item:Dt})=>[z("span",Za,wt(Dt.name),1),z("button",{class:"btn btn-ghost btn-sm handle absolute px-2 py-4 mx-1 -my-4",onClick:X[4]||(X[4]=en(()=>{},["stop"]))},[rt(ht,{name:"streamline-freehand:data-transfer-vertical"})]),z("span",null,wt(Dt.quantity)+" "+wt(Dt.unit),1),z("button",{onClick:en(Nn=>A(g)(Dt.id),["stop"])},[rt(ht,{name:"streamline-freehand:remove-delete-sign-bold"})],8,tl)]),empty:At(()=>X[6]||(X[6]=[vn("Brak produktów w kategorii",-1)])),_:2},1032,["data-category-id","draggableOptions","itemProps","items"])]))),128)):(J(),tt("li",el,"Brak produktów na liście"))]),A(D).length?(J(),tt("div",nl,[(J(!0),tt(ue,null,de(A(D),j=>(J(),tt("span",ol,wt(j)+"\\ ",1))),256))])):Ne("",!0)])])}}});export{cl as default};

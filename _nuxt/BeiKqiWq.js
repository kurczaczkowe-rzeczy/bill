import S from"./F-qFkJOb.js";import{_ as L}from"./FRgQ-y2V.js";import{e as N,f as C,r as w,c as i,o as l,a as s,g as y,h as A,i as E,v as V,j as n,k as B,t as p,b as d,F as R,l as T,w as D,d as F}from"./D8_hQmVV.js";import{S as j,R as g}from"./CZs7S0xp.js";import{u as q,k as z}from"./Dm3JwYYG.js";const M={class:"card flex justify-center max-w-xl m-auto"},U={class:"card-body list bg-base-100 rounded-box shadow-md w-full"},I={class:"list-col-grow"},J=["aria-invalid"],$={key:0,class:"validator-hint hidden"},G={class:"btn btn-ghost btn-square"},H={key:1,class:"list-row"},K={key:0},Z=N({__name:"index",async setup(O){let c,u;const m=new j,{data:_,error:h,refresh:v}=([c,u]=C(async()=>q("shoppingLists",async()=>{const e=await m.getShoppingListsAsync();if(e instanceof g.Error)throw new Error(e);if(e instanceof g.Success)return z(e.result);throw new Error("Unsupported response type: "+e.constructor.name)},{server:!1})),c=await c,u(),c),o=w(""),r=w("");async function x(e){if(r.value.trim()===""){o.value="Nazwa powinna być wypełniona";return}m.createShoppingListAsync(r.value).then(t=>{if("error"in t)throw t.error;e.currentTarget?.reset(),b(),v()}).catch(t=>{console.error(t),o.value=t.toString()})}function b(){r.value="",o.value=""}return(e,t)=>{const f=S,k=L;return l(),i("div",M,[s("ul",U,[s("li",null,[s("form",{class:"list-row",onSubmit:A(x,["prevent"])},[s("label",I,[E(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>B(r)?r.value=a:null),"aria-invalid":!!n(o),class:"input input-ghost validator",placeholder:"Nazwa listy",required:"",type:"text"},null,8,J),[[V,n(r)]]),n(o).trim()?(l(),i("span",$,p(n(o)),1)):y("",!0)]),s("button",G,[d(f,{name:"streamline-freehand:add-sign-bold"})])],32)]),n(_)?.length?(l(!0),i(R,{key:0},T(n(_),a=>(l(),i("li",{key:a.id,class:"list-row"},[d(k,{to:{name:"lists-id",params:{id:a.id}},class:"list-col-grow"},{default:D(()=>[s("span",null,p(a.name),1)]),_:2},1032,["to"]),s("span",null,[F(p(a.productAmount)+" ",1),d(f,{name:"streamline-freehand:shopping-cart-trolley"})])]))),128)):(l(),i("li",H,"Brak list"))]),n(h)?(l(),i("div",K,p(n(h)),1)):y("",!0)])}}});export{Z as default};
